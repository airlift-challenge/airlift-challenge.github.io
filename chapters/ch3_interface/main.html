
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Simulator Interface &#8212; Airlift Challenge v1.0 Documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"tex": {"macros": {"Reals": "\\mathbb{R}", "Indicator": ["\\mathbf{I} \\left(#1\\right)", 1], "Airports": "\\mathbf{A}", "AirplanesAtAirport": ["\\Airplanes_{#1}(#2)", 2], "workingcapactity": ["\\textit{capacity}_{#1}", 1], "processtime": ["\\textit{processtime}_{#1}", 1], "Routes": "\\mathbf{R}", "routecost": ["\\textit{routecost}_{#1#2}", 2], "routetime": ["\\textit{routetime}_{#1#2}", 2], "routestart": ["\\textit{start}_{#1}", 1], "routeend": ["\\textit{end}_{#1}", 1], "numflights": ["\\textit{numflights}_{#1#2}", 2], "AvailableRoutes": ["\\overline{\\mathbf{R}}(#1)", 1], "routemapdiameter": ["\\textit{diameter}_{#1}", 1], "Airplanes": "\\mathbf{P}", "currentairport": ["\\textit{airport}_{#1}(#2)", 2], "weightcapacity": ["\\textit{weightcapacity}_{#1}", 1], "Cargos": "\\mathbf{C}", "CargoOnPlane": ["\\Cargos_{#1}(#2)", 2], "CargoAtAirport": ["\\Cargos_{#1}(#2)", 2], "cargoweight": ["\\textit{weight}_{#1}", 1], "cargosrc": ["\\textit{src}_{#1}", 1], "cargodest": ["\\textit{dest}_{#1}", 1], "softdeadline": ["\\textit{targetdelivery}_{#1}", 1], "harddeadline": ["\\textit{deadline}_{#1}", 1], "actualdelivery": ["\\textit{actualdelivery}_{#1}", 1], "totalcargo": "\\textit{totalcargo}", "process": ["process_{#1}", 1], "cargotoload": ["cargo\\_to\\_load_{#1}", 1], "cargotounload": ["cargo\\_to\\_unload_{#1}", 1], "destination": ["destination", 1], "missedcoeff": "\\alpha", "missed": "\\textit{missed}", "latenesscoeff": "\\beta", "lateness": ["\\textit{lateness}_{#1}", 1], "scaledlateness": "\\textit{scaledlateness}", "totalflightcostcoeff": "\\gamma", "flightcost": ["\\textit{flightcost}_{#1}", 1], "scaledflightcost": "\\textit{scaledflightcost}", "episodescore": "\\textit{EpisodeScore}", "randomscore": "\\textit{RandomScore}", "baselinescore": "\\textit{BaselineScore}", "normalizedescore": "\\textit{NormalizedScore}", "overallscore": "\\textit{OverallScore}"}}, "html_theme_options": {"use_download_button": false, "use_edit_page_button": false, "use_repository_button": false, "use_issues_button": false}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Competition" href="../ch4_competition/main.html" />
    <link rel="prev" title="Model" href="../ch2_model/main.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Airlift Challenge v1.0 Documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../main.html">
                    Overview
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Main
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../ch1_getting_started/main.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch2_model/main.html">
   Model
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Simulator Interface
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch4_competition/main.html">
   Competition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch5_gen/main.html">
   Generating Scenarios
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch6_solutions/main.html">
   Solutions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../API/essential_api.html">
   Essential API
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Code
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../API/environment.html">
   Environment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../API/airports.html">
   Airports
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../API/agents.html">
   Agents
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../API/plane_types.html">
   Airplane Types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../API/renderer.html">
   Renderer
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../API/local_eval.html">
   Local Evaluator
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../API/route_map.html">
   Route Map
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../API/generators/generators.html">
   Generators
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../API/generators/airplane_gen.html">
     Airplane Generators
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../API/generators/airport_gen.html">
     Airport Generators
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../API/generators/cargo_gen.html">
     Cargo Generators
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../API/generators/map_gen.html">
     Map Generators
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../API/generators/route_gen.html">
     Route Generators
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../API/generators/world_gen.html">
     World Generators
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../API/generators/event_gen.html">
     Event Generator
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../API/generators/event_interval_gen.html">
     Event Interval Generator
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Miscellaneous
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../misc/contact.html">
   Contact Us
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../misc/credits.html">
   Credits
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../misc/bibliography.html">
   Bibliography
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../_sources/chapters/ch3_interface/main.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#action-space">
   Action Space
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#observation-space">
   Observation Space
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reward">
   Reward
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#info-dictionary">
   Info Dictionary
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#stopping-criteria">
   Stopping criteria
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Simulator Interface</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#action-space">
   Action Space
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#observation-space">
   Observation Space
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reward">
   Reward
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#info-dictionary">
   Info Dictionary
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#stopping-criteria">
   Stopping criteria
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="simulator-interface">
<span id="sec-interface"></span><h1>Simulator Interface<a class="headerlink" href="#simulator-interface" title="Permalink to this headline">#</a></h1>
<p>The simulator takes the form of a cooperative multi-agent system <span id="id1">[<a class="reference internal" href="../misc/bibliography.html#id6" title="Liviu Panait and Sean Luke. Cooperative multi-agent learning: the state of the art. Autonomous agents and multi-agent systems, 11(3):387–434, 2005.">11</a>]</span> implemented using the <a class="reference external" href="https://www.gymlibrary.dev/">OpenAI Gym</a> and <a class="reference external" href="https://www.pettingzoo.ml/">Petting Zoo interfaces</a>.
The environment is advanced by calling the environment step method:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">obs</span><span class="p">,</span> <span class="n">rewards</span><span class="p">,</span> <span class="n">dones</span><span class="p">,</span> <span class="n">infos</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
</pre></div>
</div>
<p>This method receives actions for all agents from the algorithm, and updates the internal state of the environment.
It then returns an observation of the environment (which is customizable by the participants) and a reward.
All variables are <code class="docutils literal notranslate"><span class="pre">obs</span></code>, <code class="docutils literal notranslate"><span class="pre">rewards</span></code>, <code class="docutils literal notranslate"><span class="pre">dones</span></code>, <code class="docutils literal notranslate"><span class="pre">infos</span></code>, and <code class="docutils literal notranslate"><span class="pre">actions</span></code> are dictionaries which are indexed by agent ID.
A list of agent IDs can be obtained from <code class="docutils literal notranslate"><span class="pre">env.agents</span></code>.</p>
<section id="action-space">
<span id="id2"></span><h2>Action Space<a class="headerlink" href="#action-space" title="Permalink to this headline">#</a></h2>
<p>The simulator implements incorporates aspects of the OpenAI Gym and Petting Zoo “Parallel Environment” reinforcement learning interfaces.
The action space is defined in <a class="reference internal" href="#tab-actionspace"><span class="std std-numref">Table 4</span></a>. This space adheres to the OpenAI Gym space standard, and incorporates a custom-defined “List” space.
The actions are designed such that the agent does not need to provide fine-grained control of the airplane, but rather can provide a list of “orders” for the airplane to follow at each airport.
For example, by issuing a single action, the agent can order an airplane to (1) load cargo, (2) unload cargo, and (3) take off for a destination when done processing.
At subsequent steps, the airplane state machine will execute the action automatically, and the agent need not issue a new action until the airplane reaches its next destination (or a change in the environment requires an updated action plan).
As the state machine proceeds, it will automatically update the current action (e.g., clearing the process flag when done processing, or emptying the <code class="docutils literal notranslate"><span class="pre">cargo_to_load</span></code> list once the cargo has started loading).</p>
<table class="colwidths-given table" id="tab-actionspace">
<caption><span class="caption-number">Table 4 </span><span class="caption-text">Action Space</span><a class="headerlink" href="#tab-actionspace" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Model Definition</p></th>
<th class="head"><p>Space Type<br />
(see <a class="reference external" href="https://github.com/openai/gym/blob/master/gym/spaces/space.py">Open AI Gym spaces</a>)</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Valid values from observation <code class="docutils literal notranslate"><span class="pre">obs</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">process</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\(\process{p}\)</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Discrete(2)</span></code></p></td>
<td><p>Flag indicating if the airplane should process when in the WAITING and READY_FOR_TAKEOFF states.
This flag should always be set to 1, unless the current airplane should wait for other airplanes to process first.</p></td>
<td><p>0 = Do not process.<br />
1 = Process when working capacity is available at current airport.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cargo_to_load</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\(\cargotoload{p}\)</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">List(Discrete(max_num_cargo),</span> <span class="pre">maxsize=max_cargo_on_plane)</span></code></p></td>
<td><p>Cargo ID’s to load onto plane when processing</p></td>
<td><p>Choose any subset of cargo from <code class="docutils literal notranslate"><span class="pre">obs[&quot;cargo_at_current_airport&quot;]</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cargo_to_unload</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\(\cargotounload{p}\)</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">List(Discrete(max_num_cargo),</span> <span class="pre">maxsize=max_cargo_on_plane)</span></code></p></td>
<td><p>Cargo ID’s to unload from plane when processing</p></td>
<td><p>Choose any subset of cargo from <code class="docutils literal notranslate"><span class="pre">obs[&quot;cargo_onboard&quot;]</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">destination</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\(destination\)</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Discrete(max_airports</span> <span class="pre">+</span> <span class="pre">1)</span></code></p></td>
<td><p>Contains ID of an airport where the Airplane will travel to next.</p></td>
<td><p>Choose a single airport ID from <code class="docutils literal notranslate"><span class="pre">obs[&quot;available_routes&quot;]</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="observation-space">
<h2>Observation Space<a class="headerlink" href="#observation-space" title="Permalink to this headline">#</a></h2>
<p><a class="reference internal" href="#tab-obsspace"><span class="std std-numref">Table 5</span></a> shows the observation space itself.
The observation contains information specific to an agent, whereas the “globalstate” entry contains information global to all agents (including the observations of all other agents).
Note that the “globalstate” value is the same as that returned by the environment’s <code class="docutils literal notranslate"><span class="pre">state()</span></code> method.</p>
<p><a class="reference internal" href="#tab-cargoinfo"><span class="std std-numref">Table 6</span></a> and <a class="reference internal" href="#tab-actionspace"><span class="std std-numref">Table 4</span></a> describe subspaces that are used in the observation, and
We use a custom space named DiGraph which represents a NetworkX directed graph.</p>
<table class="colwidths-given table" id="tab-obsspace">
<caption><span class="caption-number">Table 5 </span><span class="caption-text">Observation Space (Dictionary). Provides observation for Airplane/Agent <span class="math notranslate nohighlight">\(p \in \Airplanes\)</span></span><a class="headerlink" href="#tab-obsspace" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Model Definition</p></th>
<th class="head"><p>Space Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">current_airport</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\(\currentairport{p}{t}\)</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Discrete(max_airports+1)</span></code></p></td>
<td><p>ID of airport where airplane currently is located, or <code class="docutils literal notranslate"><span class="pre">NOAIRPORT_ID</span></code> if <code class="docutils literal notranslate"><span class="pre">MOVING</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cargo_onboard</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\(\CargoOnPlane{p}{t}\)</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">List(Discrete(max_num_cargo),</span> <span class="pre">maxsize=max_cargo_on_airplane)</span></code></p></td>
<td><p>ID’s of cargo that is onboard the airplane</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max_weight</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\(\weightcapacity{p}\)</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Discrete(10000)</span></code></p></td>
<td><p>Maximum cargo weight that can be carried by airplane</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">current_weight</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\(\sum_{c \in \CargoOnPlane{p}{t}} \cargoweight{c}\)</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Discrete(10000)</span></code></p></td>
<td><p>Current cargo weight carried by airplane</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cargo_at_current_airport</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\(\CargoAtAirport{\currentairport{p}{t}}{t}\)</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">List(Discrete(max_num_cargo),</span> <span class="pre">maxsize=max_cargo_on_airplane)</span></code></p></td>
<td><p>ID’s of cargo that is stored at the current airport.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">state</span></code></p></td>
<td><p>N/A</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Discrete(4)</span></code></p></td>
<td><p>Contains the agent state. See: <a class="reference internal" href="../API/essential_api.html#plane-states"><span class="std std-ref">list of airplane states</span></a> and <a class="reference internal" href="../ch2_model/main.html#airplane-state-machine"><span class="std std-ref">state machine definition</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">available_routes</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\(\{ a_2 \in \Airports | (\currentairport{p}{t}, a_2) \in \AvailableRoutes{t} \}\)</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">List(Discrete(max_airports+1),</span> <span class="pre">maxsize=max_airports)</span></code></p></td>
<td><p>ID’s of airports that can be reached from the current airport. Routes which are disabled will not be included in this list.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">globalstate</span></code></p></td>
<td><p>N/A</p></td>
<td><p>State Space</p></td>
<td><p>The global state of the environment.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">next_action</span></code></p></td>
<td><p>N/A</p></td>
<td><p>Action Space (see <a class="reference internal" href="#tab-actionspace"><span class="std std-numref">Table 4</span></a>)</p></td>
<td><p>Contains the last action issued by the agent. Entries will be modified by the state machine as transitions occur.</p></td>
</tr>
</tbody>
</table>
<p>The state space uses the following named tuple to describe cargo:</p>
<table class="colwidths-given table" id="tab-cargoinfo">
<caption><span class="caption-number">Table 6 </span><span class="caption-text">CargoInfo Space (NamedTuple). Describes an individual piece of cargo <span class="math notranslate nohighlight">\(c \in \Cargos\)</span>.</span><a class="headerlink" href="#tab-cargoinfo" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Model Definition</p></th>
<th class="head"><p>Space Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p>N/A</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Discrete(max_num_cargo)</span></code></p></td>
<td><p>ID of the cargo</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">location</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\(\cargosrc{c}\)</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Discrete(max_airports+1)</span></code></p></td>
<td><p>ID of airport where cargo is located, or <code class="docutils literal notranslate"><span class="pre">NOAIRPORT_ID</span></code> if cargo is on an airplane or being loaded/unloaded</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">destination</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\(\cargodest{c}\)</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Discrete(max_airports+1)</span></code></p></td>
<td><p>ID of destination airport where cargo is to be delivered.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">weight</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\(\cargoweight{c}\)</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Discrete(10000)</span></code></p></td>
<td><p>Weight of the cargo</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given table" id="tab-globalspace">
<caption><span class="caption-number">Table 7 </span><span class="caption-text">StateSpace (Dictionary) used by observation space. This contains global state that is common to all agents.</span><a class="headerlink" href="#tab-globalspace" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Space Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">active_cargo</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">List(CargoInfo,</span>&#160; <span class="pre">maxsize=max_num_cargo)</span></code></p></td>
<td><p>List of active cargo (cargo not delivered or missed)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">event_new_cargo</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">List(CargoInfo,</span>&#160; <span class="pre">maxsize=max_num_cargo)</span></code></p></td>
<td><p>List of new cargo which was generated and added to the active cargo list in the last step.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">agents</span></code></p></td>
<td><p>Dictionary of agent observations</p></td>
<td><p>Contains the observation for each agent</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">route_map</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DiGraph(number_of_nodes=max_airports,</span> <span class="pre">edge_attributes=['cost',</span> <span class="pre">'time',</span> <span class="pre">'route_available'])</span></code></p></td>
<td><p>Route map which contains information about airports and routes. This is a NetworkX DiGraph class.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="reward">
<h2>Reward<a class="headerlink" href="#reward" title="Permalink to this headline">#</a></h2>
<p>The reward signal is shown in <a class="reference internal" href="#tab-rewards"><span class="std std-numref">Table 8</span></a>, and follows directly from the objective function defined in <em>(4)</em>.</p>
<table class="colwidths-given table" id="tab-rewards">
<caption><span class="caption-number">Table 8 </span><span class="caption-text">Rewards given at each step of the simulation.</span><a class="headerlink" href="#tab-rewards" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 75%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Condition</p></th>
<th class="head"><p>Reward Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>When cargo item <span class="math notranslate nohighlight">\(c \in \Cargos\)</span> becomes missed</p></td>
<td><p><span class="math notranslate nohighlight">\(-\alpha\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>For each time step where cargo item <span class="math notranslate nohighlight">\(c \in \Cargos\)</span> is late</p></td>
<td><p><span class="math notranslate nohighlight">\(-\beta\)</span></p></td>
</tr>
<tr class="row-even"><td><p>Each time step during which an airplane is in flight</p></td>
<td><p><span class="math notranslate nohighlight">\(-\gamma\)</span></p></td>
</tr>
</tbody>
</table>
</section>
<section id="info-dictionary">
<h2>Info Dictionary<a class="headerlink" href="#info-dictionary" title="Permalink to this headline">#</a></h2>
<p>The step method returns an <code class="docutils literal notranslate"><span class="pre">info</span></code> dictionary with an entry for each agent.
The value is a dictionary with the following entries:</p>
<table class="colwidths-given table" id="tab-info">
<caption><span class="caption-number">Table 9 </span><span class="caption-text">Info dictionary.</span><a class="headerlink" href="#tab-info" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Space Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">warnings</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">List(str)</span></code></p></td>
<td><p>List of warnings resulting from the action (for example trying to load cargo that is not at the current airport).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">timeout</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></td>
<td><p>(Only returned by the local evaluator env_step method)
Indicates whether there was a timeout during this step.
This will occur when the solution policy takes too long to issue the next action.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stopping-criteria">
<h2>Stopping criteria<a class="headerlink" href="#stopping-criteria" title="Permalink to this headline">#</a></h2>
<p>The episode ends when all cargo is either (1) delivered or (2) missed, and when there is no more cargo to be generated by the dynamic cargo generator.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters\ch3_interface"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../ch2_model/main.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Model</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../ch4_competition/main.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Competition</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By The Jupyter Book community<br/>
  
    <div class="extra_footer">
      <p>
Distribution Statement A: Approved for Public Release; Distribution Unlimited: Case Number: AFRL-2022-5074, CLEARED on 19 Oct 2022
</p>

    </div>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>